<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canadian Housing Analysis - Team Project</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/style.css?v=2" rel="stylesheet">

    <!-- D3.js -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>

    <!-- Header -->
    <header>
        <div class="container">
            <div class="text-center">
                <h1>Canadian Housing Market Analysis</h1>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container-fluid">

        <!-- Visualization 1: Canada Mortgage Affordability Heatmap -->
        <div class="row justify-content-center g-5" id="vis1">
            <div class="col-12 visualization-section">
                <div class="section-header">
                    <h2 class="section-title">Visualization 1: Canada Mortgage Affordability Heatmap</h2>
                </div>
                <div class="vis-placeholder">
                    <div class="container">
                        <header>
                            <div class="header-badge">Live Data Visualization</div>
                            <h1>Canada Mortgage Affordability</h1>
                            <p class="subtitle">Interactive exploration of housing costs across provinces ¬∑ 2012‚Äî2025</p>
                        </header>

                        <div class="controls-section">
                            <div class="income-control">
                                <label for="income-slider">Annual Income</label>
                                <span id="income-display">$75,000</span>
                                <input type="range" id="income-slider" min="30000" max="250000" step="5000" value="75000">
                                <div class="income-labels">
                                    <span>$30K</span>
                                    <span>$250K</span>
                                </div>
                            </div>
                            <div class="timeline-control">
                                <label>Time Period</label>
                                <span id="quarter-display">2025 Q2</span>
                                <div class="playback-controls">
                                    <button id="play-button" class="control-btn">‚ñ∂ Play</button>
                                    <button id="reset-button" class="control-btn">‚Ü∫ Reset</button>
                                </div>
                                <input type="range" id="timeline-slider" min="0" max="51" step="1" value="51">
                                <div class="timeline-labels">
                                    <span>2012 Q3</span>
                                    <span>2025 Q2</span>
                                </div>
                            </div>
                            <div class="legend">
                                <h3>Scale</h3>
                                <div class="legend-items">
                                    <div class="legend-item"><div class="legend-color" style="background: #2d5016;"></div><span>Very Affordable (&lt;20%)</span></div>
                                    <div class="legend-item"><div class="legend-color" style="background: #5a9216;"></div><span>Affordable (20-30%)</span></div>
                                    <div class="legend-item"><div class="legend-color" style="background: #ffc107;"></div><span>Borderline (30-40%)</span></div>
                                    <div class="legend-item"><div class="legend-color" style="background: #ff6b35;"></div><span>Unaffordable (40-50%)</span></div>
                                    <div class="legend-item"><div class="legend-color" style="background: #c1121f;"></div><span>Very Unaffordable (&gt;50%)</span></div>
                                </div>
                                <p class="legend-note">Based on mortgage payment as % of monthly income</p>
                            </div>
                        </div>

                        <div class="map-container">
                            <svg id="canada-map"></svg>
                            <div id="tooltip" class="tooltip"></div>
                        </div>

                        <div class="info-section">
                            <div class="info-card"><h3>National Average</h3><p class="big-number" id="national-payment">$2,006</p><p class="affordability-text" id="national-affordability"></p></div>
                            <div class="info-card"><h3>Most Affordable</h3><p class="province-name" id="most-affordable-province">Loading...</p><p class="payment-amount" id="most-affordable-payment"></p></div>
                            <div class="info-card"><h3>Least Affordable</h3><p class="province-name" id="least-affordable-province">Loading...</p><p class="payment-amount" id="least-affordable-payment"></p></div>
                        </div>

                        <div class="data-table-section">
                            <h2>Provincial Breakdown</h2>
                            <div class="table-wrapper">
                                <table id="data-table">
                                    <thead>
                                        <tr>
                                            <th>Province</th>
                                            <th>Monthly Payment</th>
                                            <th>% of Monthly Income</th>
                                            <th>Affordability</th>
                                        </tr>
                                    </thead>
                                    <tbody id="table-body"></tbody>
                                </table>
                            </div>
                        </div>

                        <footer>
                            <p>Data Source: Equifax Canada via Canada Mortgage and Housing Corporation (CMHC) | Last Updated: September 2025</p>
                            <p>Affordability calculation based on the 30% rule: housing costs should not exceed 30% of gross monthly income</p>
                        </footer>
                    </div>
                </div>
            </div>
        </div>

        <!-- Visualization 2: Placeholder -->
        <div class="row justify-content-center g-5" id="vis2">
            <div class="col-12 visualization-section">
                <div class="section-header"><h2 class="section-title">Visualization 2</h2></div>
                <div class="vis-placeholder"><h3>Visualization Coming Soon</h3></div>
            </div>
        </div>

        <!-- Visualization 3: Vacancy Rates and Average Rent -->
        <div class="row justify-content-center g-5" id="vis3">
            <div class="col-12 visualization-section">
                <div class="section-header">
                    <h2 class="section-title">Visualization 3: Vacancy Rates and Average Rent in Major Canadian Cities (2023)</h2>
                    <p class="section-description">
                        Each building represents a major Canadian city. Building height shows population size,
                        while windows represent housing units: <strong>lit windows are occupied</strong>,
                        and <strong>dark windows are vacant</strong>. Chimney smoke indicates average
                        rent prices‚Äîmore smoke means higher rent. Cities with <strong>vacancy rates above 2%</strong>
                        are highlighted in green.
                    </p>
                </div>

            <!-- Legend -->
            <div class="legend vis3-legend">
                <div class="legend-item">
                    <div class="legend-box occupied"></div>
                    <span>Occupied Housing</span>
                </div>
                <div class="legend-item">
                    <div class="legend-box vacant"></div>
                    <span>Vacant Housing</span>
                </div>
                <div class="legend-item">
                    <span>üè≠ Chimney Height = Rent Price</span>
                </div>
                <div class="legend-item">
                    <span>üè¢ Height = Population</span>
                </div>
                <div class="legend-item">
                    <span style="color: #2ecc71;">üü¢ Green = High Vacancy (&gt;2%)</span>
                </div>
            </div>


                <div id="buildings-container"></div>
            </div>
        </div>

        <!-- Visualization 4: Placeholder -->
        <div class="row justify-content-center g-5" id="vis4">
            <div class="col-12 visualization-section">
                <div class="section-header"><h2 class="section-title">Visualization 4</h2></div>
                <div id="vis4-container"></div>
            </div>
        </div>

        <!-- Visualization 5: Population vs Rent (fixed layout) -->
        <div class="row justify-content-center g-5" id="vis5-row">
            <div class="col-12 visualization-section" style="min-height: 70vh;">
                <div class="section-header"><h2 class="section-title">Visualization 5</h2></div>
                <div class="legend"><h3>How Have Changes in Population Affected Rent?</h3></div>

                <div class="d-flex" style="height: 60vh; min-height: 400px; gap: 10px;">
                    <!-- Main Visualization Area -->
                    <div id="vis5" style="flex: 1; height: 100%; border: thin solid transparent;"></div>

                    <!-- Sidebar -->
                    <div style="width: 300px; height: 100%; border: thin solid rgb(49, 49, 49); border-radius: 5px; padding: 10px; display: flex; flex-direction: column; gap: 10px; overflow-y: auto;">
                        <h4 style="margin-bottom: 10px;">Filters:</h4>

                        <div id="vis5-structure-filter" style="border: thin solid rgb(49, 49, 49); border-radius: 5px; padding: 5px; flex: 1 1 auto; overflow-y: auto;">
                            <h6>Structure Types:</h6>
                            <div><input type="checkbox" id="RA3P" checked /><label for="RA3P">Row and apartment structures of three units and over</label></div>
                            <div><input type="checkbox" id="R3P" checked /><label for="R3P">Row structures of three units and over</label></div>
                            <div><input type="checkbox" id="A3P" checked /><label for="A3P">Apartment structures of three units and over</label></div>
                            <div><input type="checkbox" id="A6P" checked /><label for="A6P">Apartment structures of six units and over</label></div>
                        </div>

                        <div id="vis5-unit-filter" style="border: thin solid rgb(49, 49, 49); border-radius: 5px; padding: 5px; flex: 1 1 auto; overflow-y: auto;">
                            <h6>Unit Types:</h6>
                            <div><input type="checkbox" id="bachelor" checked /><label for="bachelor">Bachelor units</label></div>
                            <div><input type="checkbox" id="onebed" checked /><label for="onebed">One bedroom units</label></div>
                            <div><input type="checkbox" id="twobed" checked /><label for="twobed">Two bedroom units</label></div>
                            <div><input type="checkbox" id="threebed" checked /><label for="threebed">Three bedroom units</label></div>
                        </div>

                        <div id="vis5-city-filter" style="border: thin solid rgb(49, 49, 49); border-radius: 5px; padding: 5px; flex: 1 1 auto; overflow-y: auto;">
                            <h6>Province / City</h6>
                            <select id="provinceSelect" class="form-select form-select-sm mb-2">
                                <option value="All Provinces">All Provinces</option>
                                <option value="Alberta">Alberta</option>
                                <option value="British Columbia">British Columbia</option>
                                <option value="Manitoba">Manitoba</option>
                                <option value="New Brunswick">New Brunswick</option>
                                <option value="Newfoundland and Labrador">Newfoundland and Labrador</option>
                                <option value="Northwest Territories">Northwest Territories</option>
                                <option value="Nova Scotia">Nova Scotia</option>
                                <option value="Ontario">Ontario</option>
                                <option value="Prince Edward Island">Prince Edward Island</option>
                                <option value="Quebec">Quebec</option>
                                <option value="Saskatchewan">Saskatchewan</option>
                            </select>
                            <div id="city-list"></div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-4"><h5>About This Project</h5></div>
                <div class="col-md-4"><h5>Team Members</h5><p>Burak Unat</p><p>Jefferson Liu</p></div>
                <div class="col-md-4"><h5>Data Sources</h5></div>
            </div>
            <div class="copyright">&copy; <span id="current-year"></span> Canadian Housing Analysis Team | Data Visualization Project</div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Visualization Objects -->
    <script src="js/PopulationRentChart.js"></script>
    <script src="js/vacancyVisualization.js"></script>
    <script src="js/incomeRentVisualization.js"></script>

    <!-- Visualization Script -->
    <script src="js/main.js"></script>
    <script src="js/visualization.js"></script>

</body>
</html>
