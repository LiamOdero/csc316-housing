<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canadian Housing Analysis - Team Project</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/style.css?v=2" rel="stylesheet">

    <!-- D3.js -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>

    <!-- Header -->
    <header>
        <div class="container">
            <div class="text-center">
                <h1>Canadian Housing Market Analysis</h1>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container-fluid">

                <!-- Opening Hook Section -->
        <div class="row justify-content-center" style="margin-top: 60px; margin-bottom: 60px;">
            <div class="col-12 text-center">
                <h2 style="color: #666; font-size: 2em; margin-bottom: 40px;">Did you know?</h2>
                
                <div class="row justify-content-center">
                    <div class="col-md-5">
                        <h1 style="color: #48bb78; font-size: 3.5em; font-weight: bold; margin-bottom: 20px;">$230,134</h1>
                        <p style="font-size: 1.3em; color: #4a5568;">
                            The average price of a home in<br>September <strong>2000</strong>
                        </p>
                    </div>
                    <div class="col-md-5">
                        <h1 style="color: #c53030; font-size: 3.5em; font-weight: bold; margin-bottom: 20px;">$938,334</h1>
                        <p style="font-size: 1.3em; color: #4a5568;">
                            The average price of a home in<br>September <strong>2025</strong>
                        </p>
                    </div>
                </div>
                
                <p style="font-size: 1.4em; color: #2d3748; margin-top: 40px; max-width: 900px; margin-left: auto; margin-right: auto; line-height: 1.6;">
                    By now, most Canadians are intimately familiar with just how unaffordable housing has become, but how quickly did things actually go out of control?
                </p>
            </div>
        </div>

        <!-- Narrative intro -->
        <div class="row justify-content-center">
            <div class="col-12 col-md-8 narrative-text narrative-before">
                <h3>How quickly have mortgage prices increased over the past ~10 years?</h3>
            </div>
        </div>


        <!-- Visualization 1: Canada Mortgage Affordability Heatmap -->
        <div class="row justify-content-center g-5" id="vis1">
            <div class="col-12 visualization-section">
                <div class="section-header">
                    <h2 class="section-title">Visualization 1: Canada Mortgage Affordability Heatmap</h2>
                </div>
                <div class="vis-placeholder">
                    <div class="container">
                        <header>
                            <div class="header-badge">Live Data Visualization</div>
                            <h1>Canada Mortgage Affordability</h1>
                            <p class="subtitle">Interactive exploration of housing costs across provinces · 2012—2025</p>
                        </header>

                        <div class="controls-section">
                            <div class="income-control">
                                <label for="income-slider">Annual Income</label>
                                <span id="income-display">$75,000</span>
                                <input type="range" id="income-slider" min="30000" max="250000" step="5000" value="75000">
                                <div class="income-labels">
                                    <span>$30K</span>
                                    <span>$250K</span>
                                </div>
                            </div>
                            <div class="timeline-control">
                                <label>Time Period</label>
                                <span id="quarter-display">2025 Q2</span>
                                <div class="playback-controls">
                                    <button id="play-button" class="control-btn">▶ Play</button>
                                    <button id="reset-button" class="control-btn">↺ Reset</button>
                                </div>
                                <input type="range" id="timeline-slider" min="0" max="51" step="1" value="51">
                                <div class="timeline-labels">
                                    <span>2012 Q3</span>
                                    <span>2025 Q2</span>
                                </div>
                            </div>
                            <div class="legend">
                                <h3>Scale</h3>
                                <div class="legend-items">
                                    <div class="legend-item"><div class="legend-color" style="background: #2d5016;"></div><span>Very Affordable (&lt;20%)</span></div>
                                    <div class="legend-item"><div class="legend-color" style="background: #5a9216;"></div><span>Affordable (20-30%)</span></div>
                                    <div class="legend-item"><div class="legend-color" style="background: #ffc107;"></div><span>Borderline (30-40%)</span></div>
                                    <div class="legend-item"><div class="legend-color" style="background: #ff6b35;"></div><span>Unaffordable (40-50%)</span></div>
                                    <div class="legend-item"><div class="legend-color" style="background: #c1121f;"></div><span>Very Unaffordable (&gt;50%)</span></div>
                                </div>
                                <p class="legend-note">Based on mortgage payment as % of monthly income</p>
                            </div>
                        </div>

                        <div class="map-container">
                            <svg id="canada-map"></svg>
                            <div id="tooltip" class="tooltip"></div>
                        </div>

                        <div class="info-section">
                            <div class="info-card"><h3>National Average</h3><p class="big-number" id="national-payment">$2,006</p><p class="affordability-text" id="national-affordability"></p></div>
                            <div class="info-card"><h3>Most Affordable</h3><p class="province-name" id="most-affordable-province">Loading...</p><p class="payment-amount" id="most-affordable-payment"></p></div>
                            <div class="info-card"><h3>Least Affordable</h3><p class="province-name" id="least-affordable-province">Loading...</p><p class="payment-amount" id="least-affordable-payment"></p></div>
                        </div>

                        <div class="data-table-section">
                            <h2>Provincial Breakdown</h2>
                            <div class="table-wrapper">
                                <table id="data-table">
                                    <thead>
                                        <tr>
                                            <th>Province</th>
                                            <th>Monthly Payment</th>
                                            <th>% of Monthly Income</th>
                                            <th>Affordability</th>
                                        </tr>
                                    </thead>
                                    <tbody id="table-body"></tbody>
                                </table>
                            </div>
                        </div>

                        <footer>
                            <p>Data Source: Equifax Canada via Canada Mortgage and Housing Corporation (CMHC) | Last Updated: September 2025</p>
                            <p>Affordability calculation based on the 30% rule: housing costs should not exceed 30% of gross monthly income</p>
                        </footer>
                    </div>
                </div>
            </div>
        </div>

        <!-- Narrative before vis 2 -->
        <div class="row justify-content-center">
            <div class="col-12 col-md-8 narrative-text narrative-before">
                <h3>How quickly have rent prices increased over the past 4 years?</h3>
            </div>
        </div>

        <!-- Visualization 2: Canadian Rental Price Explorer -->
        <div class="row justify-content-center g-5" id="vis2">
            <div class="col-12 visualization-section">
                <div class="section-header">
                    <h2 class="section-title">Visualization 2</h2>
                </div>
                <div id="map" style="min-height: 700px;"></div>
            </div>
        </div>

        <!-- Narrative before vis 5 -->
        <div class="row justify-content-center">
            <div class="col-12 col-md-8 narrative-text narrative-before">
                <h3>How do vacancies affect housing affordability</h3>
            </div>
        </div>


        
        <!-- Visualization 3: Housing Vacancy vs Rent (Burak's visualization) -->
        <div class="viz-block">
        <div class="row justify-content-center g-5" id="vis3">
            <div class="col-12 visualization-section">
                <div class="section-header">
                    <h2 class="section-title">Visualization 3: Vacancy Rates and Average Rent in Major Canadian Cities (2023)</h2>
                    <p class="section-description">
                        Each building represents a major Canadian city. Building height shows population size,
                        while windows represent housing units: <strong>lit windows are occupied</strong>,
                        and <strong>dark windows are vacant</strong>. Chimney smoke indicates average
                        rent prices—more smoke means higher rent. Cities with <strong>vacancy rates above 2%</strong>
                        are highlighted in green.
                    </p>
                </div>

            <!-- Legend -->
            <div class="legend vis3-legend">
                <div class="legend-item">
                    <div class="legend-box occupied"></div>
                    <span>Occupied Housing</span>
                </div>
                <div class="legend-item">
                    <div class="legend-box vacant"></div>
                    <span>Vacant Housing</span>
                </div>
                <div class="legend-item">
                    <span>🏭 Chimney Height = Rent Price</span>
                </div>
                <div class="legend-item">
                    <span>🏢 Height = Population</span>
                </div>
                <div class="legend-item">
                    <span style="color: #2ecc71;">🟢 Green = High Vacancy (&gt;2%)</span>
                </div>
            </div>


                <div id="buildings-container"></div>
            </div>
        </div>

        <!-- Narrative after vis 5 -->
        <div class="row justify-content-center">
            <div class="col-12 col-md-8 narrative-text narrative-after">
                <h3>Lower vacancy means lower affordability</h3>
            </div>
        </div>
        </div> <!-- /.viz-block -->
        

        <!-- Narrative before vis 3 -->
        <div class="row justify-content-center">
            <div class="col-12 col-md-8 narrative-text narrative-before">
                <h3>As rent prices increase, do wages keep up?</h3>
            </div>
        </div>

        <!-- Visualization 4: Placeholder -->
        <div class="row justify-content-center g-5" id="vis4">
            <div class="col-12 visualization-section">
                <div class="section-header"><h2 class="section-title">Visualization 4</h2></div>
                <div id="vis4-container"></div>
            </div>
        </div>

        <!-- Narrative after vis 3 -->
        <div class="row justify-content-center">
            <div class="col-12 col-md-8 narrative-text narrative-after">
                <h3>People are spending a big percentage of their income on rent</h3>
            </div>
        </div>
        </div> <!-- /.viz-block -->

    <!-- Narrative before vis 4 -->
    <div class="row justify-content-center">
        <div class="col-12 col-md-8 narrative-text narrative-before">
            <h3>How Have Changes in Population Affected Rent?</h3>
        </div>
    </div>


    <!-- Visualization 5: Placeholder -->
    <div class="viz-block">
    <div class="row justify-content-center g-5">
    <div class="col-12 visualization-section" style="min-height: 70vh;">
            <div class="section-header">
            <h2 class="section-title">Visualization 5</h2>
            </div>

                <div class="d-flex" style="height: 60vh; min-height: 400px; gap: 10px;">
                    <!-- Main Visualization Area -->
                    <div id="vis5" style="flex: 1; height: 100%; border: thin solid transparent;"></div>

                    <!-- Sidebar -->
                    <div style="width: 300px; height: 100%; border: thin solid rgb(49, 49, 49); border-radius: 5px; padding: 10px; display: flex; flex-direction: column; gap: 10px; overflow-y: auto;">
                        <h4 style="margin-bottom: 10px;">Filters:</h4>

                        <div id="vis5-structure-filter" style="border: thin solid rgb(49, 49, 49); border-radius: 5px; padding: 5px; flex: 1 1 auto; overflow-y: auto;">
                            <h6>Structure Types:</h6>
                            <div><input type="checkbox" id="RA3P" checked /><label for="RA3P">Row and apartment structures of three units and over</label></div>
                            <div><input type="checkbox" id="R3P" checked /><label for="R3P">Row structures of three units and over</label></div>
                            <div><input type="checkbox" id="A3P" checked /><label for="A3P">Apartment structures of three units and over</label></div>
                            <div><input type="checkbox" id="A6P" checked /><label for="A6P">Apartment structures of six units and over</label></div>
                        </div>

                        <div id="vis5-unit-filter" style="border: thin solid rgb(49, 49, 49); border-radius: 5px; padding: 5px; flex: 1 1 auto; overflow-y: auto;">
                            <h6>Unit Types:</h6>
                            <div><input type="checkbox" id="bachelor" checked /><label for="bachelor">Bachelor units</label></div>
                            <div><input type="checkbox" id="onebed" checked /><label for="onebed">One bedroom units</label></div>
                            <div><input type="checkbox" id="twobed" checked /><label for="twobed">Two bedroom units</label></div>
                            <div><input type="checkbox" id="threebed" checked /><label for="threebed">Three bedroom units</label></div>
                        </div>

                        <div id="vis5-city-filter" style="border: thin solid rgb(49, 49, 49); border-radius: 5px; padding: 5px; flex: 1 1 auto; overflow-y: auto;">
                            <h6>Province / City</h6>
                            <select id="provinceSelect" class="form-select form-select-sm mb-2">
                                <option value="All Provinces">All Provinces</option>
                                <option value="Alberta">Alberta</option>
                                <option value="British Columbia">British Columbia</option>
                                <option value="Manitoba">Manitoba</option>
                                <option value="New Brunswick">New Brunswick</option>
                                <option value="Newfoundland and Labrador">Newfoundland and Labrador</option>
                                <option value="Northwest Territories">Northwest Territories</option>
                                <option value="Nova Scotia">Nova Scotia</option>
                                <option value="Ontario">Ontario</option>
                                <option value="Prince Edward Island">Prince Edward Island</option>
                                <option value="Quebec">Quebec</option>
                                <option value="Saskatchewan">Saskatchewan</option>
                            </select>
                            <div id="city-list"></div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

    </div>

        <!-- Narrative before vis 6 -->
        <div class="row justify-content-center">
            <div class="col-12 col-md-8 narrative-text narrative-before">
                <h3>Construction Visualization Placeholder</h3>
            </div>
        </div>

        <!-- Visualization 6: Placeholder -->
        <div class="viz-block">
        <div class="row justify-content-center g-5" id="vis6">
            <div class="col-12 visualization-section">
                <div class="section-header">
                    <h2 class="section-title">Visualization 6</h2>
                </div>
                <div class="vis-placeholder">
                    <h3>Visualization Coming Soon</h3>
                </div>
            </div>
        </div>

        <!-- Narrative after vis 6 -->
        <div class="row justify-content-center">
            <div class="col-12 col-md-8 narrative-text narrative-after">
                <h3>Construction doesn't keep up with demand</h3>
            </div>
        </div>
        </div> <!-- /.viz-block -->

        <!-- Narrative after vis 6 -->
        <div class="row justify-content-center">
            <div class="col-12 col-md-8 narrative-text narrative-after">
                <h3>Conclusion paragraph</h3>
            </div>
        </div>
        </div> <!-- /.viz-block -->


    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-4"><h5>About This Project</h5></div>
                <div class="col-md-4"><h5>Team Members</h5><p>Burak Unat</p><p>Jefferson Liu</p><p>Liam Odero</p><p>Mikhael Orteza</p><p>Mohammed Hussain</p></div>
                <div class="col-md-4"><h5>Data Sources</h5></div>
            </div>
            <div> <span id="current-year"></span> Data Visualization Project</div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Visualization Objects -->
    <script src="js/PopulationRentChart.js"></script>
    <script src="js/vacancyVisualization.js"></script>
    <script src="js/incomeRentVisualization.js"></script>
    <script src="js/housingUnitsVisualization.js"></script>

    <!-- Main Visualization Script -->
    <script src="js/main.js"></script>
    <script src="js/visualization.js"></script>

</body>
</html>
